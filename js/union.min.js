function createGuid(){return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"===e?t:3&t|8;return n.toString(16)})}function extractDomain(){var e=window.location.hostname.split("."),t=e.length;if(0===t||2>=t)return window.location.hostname;var n=e[t-1];return isNaN(n)?e.reverse().splice(0,t-1).reverse().join("."):window.location.hostname}function saveMantisId(){var e=Cookies.get("mantisId");e&&"undefined"!==e&&e.replace(/(^s*)|(s*$)/g,"").length>0?union.guid=e:(union.guid=createGuid(),Cookies.set("mantisId",union.guid,{expires:9e3,domain:extractDomain()}))}window.Messenger=function(){function e(e,t,n){var i="";if(arguments.length<2?i="target error - target and name are both required":"object"!=typeof e?i="target error - target itself must be window object":"string"!=typeof t&&(i="target error - target name must be string type"),i)throw new Error(i);this.target=e,this.name=t,this.prefix=n}function t(e,t){this.targets={},this.name=e,this.listenFunc=[],this.prefix=t||n,this.initListen()}var n="[mantis]",i="postMessage"in window;return e.prototype.send=i?function(e){this.target.postMessage(this.prefix+"|"+this.name+"__Messenger__"+e,"*")}:function(e){var t=window.navigator[this.prefix+this.name];if("function"!=typeof t)throw new Error("target callback function is not defined");t(this.prefix+"|"+this.name+"__Messenger__"+e,window)},t.prototype.addTarget=function(t,n){var i=new e(t,n,this.prefix);this.targets[n]=i},t.prototype.initListen=function(){var e=this,t=function(t){if("object"==typeof t&&(t=t.data),t&&"string"==typeof t)for(var n=t.split("__Messenger__"),t=n[1],i=n[0].split("|"),r=i[0],o=i[1],s=0;s<e.listenFunc.length;s++)r+o===e.prefix+e.name&&e.listenFunc[s](t)};i?"addEventListener"in document?window.addEventListener("message",t,!1):"attachEvent"in document&&window.attachEvent("onmessage",t):window.navigator[this.prefix+this.name]=t},t.prototype.listen=function(e){for(var t=0,n=this.listenFunc.length,i=!1;n>t;t++)if(this.listenFunc[t]==e){i=!0;break}i||this.listenFunc.push(e)},t.prototype.clear=function(){this.listenFunc=[]},t.prototype.send=function(e){var t,n=this.targets;for(t in n)n.hasOwnProperty(t)&&n[t].send(e)},t}(),!function(e){if("function"==typeof define&&define.amd)define(e);else if("object"==typeof exports)module.exports=e();else{var t=window.Cookies,n=window.Cookies=e();n.noConflict=function(){return window.Cookies=t,n}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(n){function i(t,r,o){var s;if("undefined"!=typeof document){if(arguments.length>1){if(o=e({path:"/"},i.defaults,o),"number"==typeof o.expires){var a=new Date;a.setMilliseconds(a.getMilliseconds()+864e5*o.expires),o.expires=a}try{s=JSON.stringify(r),/^[\{\[]/.test(s)&&(r=s)}catch(c){}return r=n.write?n.write(r,t):encodeURIComponent(String(r)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",r,o.expires&&"; expires="+o.expires.toUTCString(),o.path&&"; path="+o.path,o.domain&&"; domain="+o.domain,o.secure?"; secure":""].join("")}t||(s={});for(var u=document.cookie?document.cookie.split("; "):[],d=/(%[0-9A-Z]{2})+/g,f=0;f<u.length;f++){var p=u[f].split("="),g=p.slice(1).join("=");'"'===g.charAt(0)&&(g=g.slice(1,-1));try{var h=p[0].replace(d,decodeURIComponent);if(g=n.read?n.read(g,h):n(g,h)||g.replace(d,decodeURIComponent),this.json)try{g=JSON.parse(g)}catch(c){}if(t===h){s=g;break}t||(s[h]=g)}catch(c){}}return s}}return i.set=i,i.get=function(e){return i(e)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(t,n){i(t,"",e(n,{expires:-1}))},i.withConverter=t,i}return t(function(){})});var union={};union.messager=new Messenger("union_frame","mantisFrame"),$(document).ready(function(){if(saveMantisId(),union.messager.addTarget(window.parent,"parent"),union.guid)var e={type:"guid",guid:union.guid};union.messager.send(JSON.stringify(e))});